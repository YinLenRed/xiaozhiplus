# 🚀 小智系统测试 - 快速开始

## 📋 你的环境配置

✅ **Java后端地址**: `http://q83b6ed9.natappfree.cc`  
✅ **Python服务地址**: `http://47.98.51.180:8003`  
✅ **MQTT服务器**: `47.97.185.142:1883`  
✅ **WebSocket服务器**: `ws://47.98.51.180:8000/xiaozhi/v1/`  
✅ **测试设备ID**: `7c:2c:67:8d:89:78`

所有测试脚本已经预配置好你的服务地址！

## 🎯 最快启动方式

### Linux系统用户  
```bash
# 给脚本执行权限
chmod +x 启动测试.sh

# 运行测试菜单
./启动测试.sh
```

### Python图形界面（推荐）
```bash
python 快速测试.py
```

## 🧪 单项测试命令

所有命令都已经配置好你的Java后端地址，可以直接运行：

```bash
# 1. Java API功能测试
python test_java_api.py

# 2. MQTT通信测试  
python test_mqtt_communication.py

# 3. WebSocket音频测试
python test_websocket_audio.py

# 4. 端到端流程测试
python test_full_flow.py

# 5. 全套测试（推荐）
python run_all_tests.py
```

## 🤖 使用硬件模拟器

如果没有真实的ESP32硬件设备：

```bash
# 启动模拟器（单独窗口运行）
python hardware_simulator.py

# 然后在另一个窗口运行测试
python test_mqtt_communication.py
```

## ⚡ 一键全套测试

最推荐的测试方式：

```bash
# 自动运行所有测试组件
python run_all_tests.py
```

这会自动：
- ✅ 启动硬件模拟器
- ✅ 运行所有测试类别
- ✅ 生成详细的HTML报告
- ✅ 检查系统健康状态

## 📊 查看测试结果

测试完成后，在以下位置查看报告：

```
test_reports/
├── master_test_report_*.html    # 📈 可视化报告（推荐）
├── master_test_report_*.json    # 📄 详细数据报告
├── java_api_report.json         # Java API测试详情  
├── mqtt_report.json             # MQTT通信测试详情
├── websocket_audio_report.json  # WebSocket音频测试详情
└── full_flow_report.json        # 端到端流程测试详情
```

**🎯 重点**: 打开 `master_test_report_*.html` 查看美观的可视化报告！

## 🔧 常见问题

### 问题1: Java API连接失败
```bash
# 检查你的Java后端是否运行正常
curl http://q83b6ed9.natappfree.cc/actuator/health
```

### 问题2: Python服务连接失败
```bash  
# 检查Python服务
curl http://47.98.51.180:8003/check/hello
```

### 问题3: MQTT连接超时
- 检查网络防火墙是否开放1883端口
- 确认MQTT服务器`47.97.185.142`可达

### 问题4: 缺少依赖包
```bash
# 安装所需依赖
pip install websockets paho-mqtt requests
```

## 🎉 测试建议

### 首次测试
1. 先运行 `python test_java_api.py` 确认Java后端正常
2. 再运行 `python run_all_tests.py` 执行完整测试

### 日常测试
- 使用 `启动测试.sh`（Linux系统）
- 选择菜单选项5进行全套测试

### 调试模式
- 查看 `test_logs/` 目录下的日志文件
- 使用硬件模拟器替代真实设备进行测试

---

## 📞 需要帮助？

- 📁 查看详细文档: `README_测试指南.md`  
- 📋 查看测试方案: `全流程测试方案.md`
- 🐛 测试日志位置: `test_logs/` 目录

**🚀 现在就开始测试你的小智系统吧！**
