# 🔧 配置更新说明

## 📋 更新内容总结

### 🌐 服务地址更新
已将所有配置文件中的服务地址更新为：

- **Java后端**: `http://q83b6ed9.natappfree.cc`
- **Python服务**: `http://47.98.51.180:8003` （从localhost更新为公网地址）
- **MQTT服务器**: `47.97.185.142:1883`
- **WebSocket服务器**: `ws://47.98.51.180:8000/xiaozhi/v1/`
- **测试设备ID**: `7c:2c:67:8d:89:78`

### 📝 更新的文件列表

#### Python测试脚本
- ✅ `test_java_api.py` - Java API测试配置
- ✅ `test_full_flow.py` - 端到端流程测试配置  
- ✅ `run_all_tests.py` - 全套测试配置
- ✅ `快速测试.py` - 快速测试界面配置

#### Linux启动脚本
- ✅ `启动测试.sh` - Linux系统启动脚本
- ❌ `启动测试.bat` - Windows批处理文件已删除

#### 文档文件
- ✅ `README_测试指南.md` - 详细测试指南
- ✅ `开始测试.md` - 快速开始指南
- ✅ `全流程测试方案.md` - 测试方案文档

## 🚀 使用方式

### Linux用户（推荐）
```bash
# 1. 赋予执行权限
chmod +x 启动测试.sh

# 2. 运行测试菜单
./启动测试.sh

# 或直接使用Python界面
python 快速测试.py
```

### 直接命令行
```bash
# 全套测试（已预配置所有地址）
python run_all_tests.py

# Java API测试
python test_java_api.py

# MQTT通信测试
python test_mqtt_communication.py

# WebSocket音频测试
python test_websocket_audio.py

# 端到端流程测试
python test_full_flow.py
```

## 🔍 验证配置

### 1. 检查Java后端
```bash
curl http://q83b6ed9.natappfree.cc/actuator/health
```

### 2. 检查Python服务  
```bash
curl http://47.98.51.180:8003/check/hello
```

### 3. 检查MQTT连接
```bash
telnet 47.97.185.142 1883
```

### 4. 检查WebSocket
```bash
wscat -c ws://47.98.51.180:8000/xiaozhi/v1/
```

## ⚙️ 默认配置参数

所有测试脚本现在使用以下默认值：

```python
class SystemConfig:
    JAVA_API_BASE = "http://q83b6ed9.natappfree.cc"
    PYTHON_API_BASE = "http://47.98.51.180:8003"
    MQTT_HOST = "47.97.185.142"
    MQTT_PORT = 1883
    WEBSOCKET_URL = "ws://47.98.51.180:8000/xiaozhi/v1/"
    TEST_DEVICE_ID = "7c:2c:67:8d:89:78"
```

## 🧪 测试建议

### 推荐测试顺序：
1. **Java API测试** - 验证后端服务正常
2. **MQTT通信测试** - 检查消息传输
3. **WebSocket音频测试** - 验证音频流
4. **完整流程测试** - 端到端验证
5. **全套测试** - 综合测试报告

### 使用硬件模拟器：
```bash
# 启动模拟器（单独终端）
python hardware_simulator.py

# 在另一个终端运行测试
python test_mqtt_communication.py
```

## 📊 测试报告

测试完成后查看：
- `test_reports/master_test_report_*.html` - 可视化报告
- `test_reports/` - 详细JSON报告
- `test_logs/` - 测试日志

---

**🎉 配置更新完成！现在可以使用更新后的公网地址进行测试了。**
