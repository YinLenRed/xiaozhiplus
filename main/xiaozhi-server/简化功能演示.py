#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ™ºèƒ½æ—¶é—´ç¡®è®¤ç³»ç»Ÿç®€åŒ–æ¼”ç¤º
å±•ç¤ºåŠŸèƒ½åŸç†å’Œä½¿ç”¨åœºæ™¯
"""

def demo_conversation_scenarios():
    """æ¼”ç¤ºå¯¹è¯åœºæ™¯"""
    print("ğŸ­ æ™ºèƒ½æ—¶é—´ç¡®è®¤ç³»ç»ŸåŠŸèƒ½æ¼”ç¤º")
    print("="*50)
    print("ğŸ¯ è§£å†³é—®é¢˜: ç”¨æˆ·è¯´æ¨¡ç³Šæ—¶é—´æ—¶ï¼Œé€šè¿‡å¤šè½®å¯¹è¯ç¡®è®¤å…·ä½“æ—¶é—´")
    print()
    
    scenarios = [
        {
            "title": "åœºæ™¯1: æ¨¡ç³Šæ—¶é—´éœ€è¦ç¡®è®¤",
            "user_input": "ä¸‹å‘¨æé†’æˆ‘è®°å¾—ç»™å¥³å„¿ä¹°ç”Ÿæ—¥ç¤¼ç‰©",
            "system_analysis": "æ£€æµ‹åˆ°æ¨¡ç³Šæ—¶é—´'ä¸‹å‘¨'ï¼Œéœ€è¦ç¡®è®¤å…·ä½“æ—¥æœŸæ—¶é—´",
            "system_response": "æˆ‘ç†è§£æ‚¨æƒ³è¦è®¾ç½®æé†’ï¼šç»™å¥³å„¿ä¹°ç”Ÿæ—¥ç¤¼ç‰©ã€‚è¯·é—®æ‚¨å¸Œæœ›åœ¨ä¸‹å‘¨çš„å…·ä½“å“ªä¸€å¤©æé†’æ‚¨å‘¢ï¼Ÿæ¯”å¦‚'ä¸‹å‘¨ä¸‰ä¸‹åˆ2ç‚¹'ï¼Ÿ",
            "user_reply": "ä¸‹å‘¨ä¸‰ä¸‹åˆ2ç‚¹",
            "final_result": "âœ… æé†’å·²è®¾ç½®ï¼š2024å¹´3æœˆ13æ—¥ 14:00 - ç»™å¥³å„¿ä¹°ç”Ÿæ—¥ç¤¼ç‰©ï¼ˆä¿å­˜åˆ°Javaåç«¯ï¼‰"
        },
        {
            "title": "åœºæ™¯2: ç¼ºå°‘æ—¶é—´ä¿¡æ¯",
            "user_input": "æé†’æˆ‘äº¤æ°´ç”µè´¹",
            "system_analysis": "æ£€æµ‹åˆ°ä»»åŠ¡ä½†ç¼ºå°‘æ—¶é—´ä¿¡æ¯",
            "system_response": "æˆ‘ç†è§£æ‚¨æƒ³è¦è®¾ç½®æé†’ï¼šäº¤æ°´ç”µè´¹ã€‚è¯·é—®æ‚¨å¸Œæœ›åœ¨ä»€ä¹ˆæ—¶å€™æé†’æ‚¨å‘¢ï¼Ÿæ¯”å¦‚'æ˜å¤©ä¸‹åˆ3ç‚¹'ï¼Ÿ",
            "user_reply": "åå¤©ä¸Šåˆ9ç‚¹",
            "final_result": "âœ… æé†’å·²è®¾ç½®ï¼š2024å¹´3æœˆ10æ—¥ 09:00 - äº¤æ°´ç”µè´¹ï¼ˆä¿å­˜åˆ°Javaåç«¯ï¼‰"
        },
        {
            "title": "åœºæ™¯3: æ—¶é—´æ˜ç¡®ç›´æ¥ä¿å­˜",
            "user_input": "æ˜å¤©ä¸‹åˆ3ç‚¹æé†’æˆ‘å¼€ä¼š",
            "system_analysis": "æ£€æµ‹åˆ°æ˜ç¡®æ—¶é—´'æ˜å¤©ä¸‹åˆ3ç‚¹'",
            "system_response": "å¥½çš„ï¼Œæˆ‘ä¼šåœ¨2024å¹´3æœˆ9æ—¥ 15:00æé†’æ‚¨ï¼šå¼€ä¼š",
            "user_reply": None,
            "final_result": "âœ… æé†’ç›´æ¥è®¾ç½®æˆåŠŸï¼ˆä¿å­˜åˆ°Javaåç«¯ï¼‰"
        },
        {
            "title": "åœºæ™¯4: ç”¨æˆ·å–æ¶ˆæé†’",
            "user_input": "ä¸‹ä¸ªæœˆæé†’æˆ‘ç»­è´¹",
            "system_analysis": "æ£€æµ‹åˆ°æ¨¡ç³Šæ—¶é—´'ä¸‹ä¸ªæœˆ'",
            "system_response": "æˆ‘ç†è§£æ‚¨æƒ³è¦è®¾ç½®æé†’ï¼šç»­è´¹ã€‚è¯·é—®æ‚¨å¸Œæœ›åœ¨ä¸‹ä¸ªæœˆçš„å…·ä½“å“ªä¸€å¤©æé†’æ‚¨å‘¢ï¼Ÿ",
            "user_reply": "ç®—äº†ï¼Œä¸ç”¨äº†",
            "final_result": "ğŸš« ç”¨æˆ·å–æ¶ˆï¼Œæœªä¿å­˜æé†’"
        }
    ]
    
    for i, scenario in enumerate(scenarios, 1):
        print(f"ğŸ“‹ {scenario['title']}")
        print("-" * 40)
        print(f"ğŸ‘¤ ç”¨æˆ·è¾“å…¥: {scenario['user_input']}")
        print(f"ğŸ§  ç³»ç»Ÿåˆ†æ: {scenario['system_analysis']}")
        print(f"ğŸ¤– ç³»ç»Ÿå›å¤: {scenario['system_response']}")
        
        if scenario['user_reply']:
            print(f"ğŸ‘¤ ç”¨æˆ·å›å¤: {scenario['user_reply']}")
        
        print(f"ğŸ¯ æœ€ç»ˆç»“æœ: {scenario['final_result']}")
        print()
        
        if i < len(scenarios):
            input("æŒ‰å›è½¦ç»§ç»­ä¸‹ä¸€ä¸ªåœºæ™¯...")
            print()

def show_api_interface():
    """å±•ç¤ºAPIæ¥å£"""
    print("ğŸŒ APIæ¥å£è¯´æ˜")
    print("="*30)
    
    print("ğŸ“¤ 1. æé†’è¯·æ±‚æ¥å£:")
    print("POST /xiaozhi/reminder/request")
    print("""
è¯·æ±‚ç¤ºä¾‹:
{
  "device_id": "f0:9e:9e:04:8a:44",
  "message": "ä¸‹å‘¨æé†’æˆ‘è®°å¾—ç»™å¥³å„¿ä¹°ç”Ÿæ—¥ç¤¼ç‰©"
}

å“åº”ç¤ºä¾‹ï¼ˆéœ€è¦ç¡®è®¤æ—¶é—´ï¼‰:
{
  "success": true,
  "message": "æˆ‘ç†è§£æ‚¨æƒ³è¦è®¾ç½®æé†’ï¼šç»™å¥³å„¿ä¹°ç”Ÿæ—¥ç¤¼ç‰©ã€‚è¯·é—®æ‚¨å¸Œæœ›åœ¨ä»€ä¹ˆæ—¶å€™æé†’æ‚¨å‘¢ï¼Ÿ",
  "need_follow_up": true,
  "conversation_active": true,
  "task_id": "task_abc123"
}
""")
    
    print("ğŸ“Š 2. å¯¹è¯çŠ¶æ€æŸ¥è¯¢æ¥å£:")
    print("GET /xiaozhi/reminder/status/{device_id}")
    print("""
å“åº”ç¤ºä¾‹:
{
  "device_id": "f0:9e:9e:04:8a:44",
  "conversation_active": true,
  "status": {
    "task_id": "task_abc123",
    "extracted_task": "ç»™å¥³å„¿ä¹°ç”Ÿæ—¥ç¤¼ç‰©",
    "attempts": 1,
    "state": "waiting_time"
  }
}
""")

def show_technical_features():
    """å±•ç¤ºæŠ€æœ¯ç‰¹æ€§"""
    print("âš™ï¸ æŠ€æœ¯ç‰¹æ€§è¯´æ˜")
    print("="*25)
    
    features = [
        {
            "name": "æ™ºèƒ½æ—¶é—´è¯†åˆ«",
            "description": "è‡ªåŠ¨è¯†åˆ«æ˜ç¡®æ—¶é—´ã€æ¨¡ç³Šæ—¶é—´ã€ç¼ºå¤±æ—¶é—´",
            "examples": [
                "âœ… æ˜ç¡®: 'æ˜å¤©ä¸‹åˆ3ç‚¹' â†’ ç›´æ¥ä¿å­˜",
                "âš ï¸ æ¨¡ç³Š: 'ä¸‹å‘¨' â†’ è¯¢é—®å…·ä½“æ—¶é—´", 
                "âŒ ç¼ºå¤±: 'æé†’æˆ‘ä¹°èœ' â†’ è¯¢é—®æ—¶é—´"
            ]
        },
        {
            "name": "å¤šè½®å¯¹è¯ç®¡ç†",
            "description": "ç»´æŠ¤å¯¹è¯çŠ¶æ€ï¼Œæ”¯æŒæœ€å¤š3æ¬¡ç¡®è®¤å°è¯•",
            "examples": [
                "ğŸ”„ çŠ¶æ€è·Ÿè¸ª: INITIAL â†’ WAITING_TIME â†’ CONFIRMED",
                "ğŸ“Š å°è¯•è®¡æ•°: æœ€å¤š3æ¬¡è¯¢é—®æ—¶é—´",
                "ğŸš« è‡ªåŠ¨æ”¾å¼ƒ: è¶…è¿‡å°è¯•æ¬¡æ•°ååœæ­¢"
            ]
        },
        {
            "name": "ç­–ç•¥ä¿å­˜é›†æˆ",
            "description": "ç¡®è®¤æ—¶é—´åè‡ªåŠ¨ä¿å­˜åˆ°Javaåç«¯",
            "examples": [
                "ğŸ”— Javaæ¥å£: POST /xiaozhi/strategy/reminder",
                "ğŸ“‹ æ•°æ®æ ¼å¼: åŒ…å«task_idã€æ—¶é—´ã€å†…å®¹ç­‰",
                "âš¡ å¼‚æ­¥å¤„ç†: ä¸é˜»å¡ç”¨æˆ·å¯¹è¯"
            ]
        },
        {
            "name": "æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ",
            "description": "é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å›å¤ç”¨æˆ·ï¼Œæ”¯æŒæ’é˜Ÿæ’­æ”¾",
            "examples": [
                "ğŸµ é˜Ÿåˆ—æ’­æ”¾: ç³»ç»Ÿå›å¤æŒ‰é¡ºåºæ’­æ”¾",
                "ğŸš€ é«˜ä¼˜å…ˆçº§: ç³»ç»Ÿå›å¤ä¼˜å…ˆçº§ä¸º0",
                "ğŸ“± è®¾å¤‡é€šçŸ¥: ç›´æ¥å‘é€åˆ°ç”¨æˆ·è®¾å¤‡"
            ]
        }
    ]
    
    for feature in features:
        print(f"\nğŸ”§ {feature['name']}")
        print(f"   {feature['description']}")
        for example in feature['examples']:
            print(f"   {example}")

def show_integration_guide():
    """å±•ç¤ºé›†æˆæŒ‡å—"""
    print("\nğŸ”— ç³»ç»Ÿé›†æˆæŒ‡å—")
    print("="*25)
    
    print("ğŸ“‹ é›†æˆæ­¥éª¤:")
    print("1ï¸âƒ£ PythonæœåŠ¡ç«¯ï¼š")
    print("   âœ… æ™ºèƒ½æ—¶é—´ç¡®è®¤ç³»ç»Ÿå·²é›†æˆåˆ°UnifiedEventService")
    print("   âœ… APIæ¥å£å·²æ·»åŠ åˆ°GreetingHandler")
    print("   âœ… æ¶ˆæ¯é˜Ÿåˆ—å›å¤åŠŸèƒ½å·²è¿æ¥")
    print()
    
    print("2ï¸âƒ£ Javaåç«¯éœ€è¦ï¼š")
    print("   ğŸ“Œ æä¾›ç­–ç•¥ä¿å­˜æ¥å£: POST /xiaozhi/strategy/reminder")
    print("   ğŸ“Œ å¤„ç†æé†’ä»»åŠ¡è°ƒåº¦ï¼ˆæ ¹æ®reminder_timeï¼‰")
    print("   ğŸ“Œ åˆ°æ—¶é—´åé€šè¿‡MQTTæ¨é€æé†’ç»™Python")
    print()
    
    print("3ï¸âƒ£ å®Œæ•´æµç¨‹ï¼š")
    print("   ç”¨æˆ·è¯´è¯ â†’ Pythonè¯†åˆ«æ—¶é—´ â†’ å¤šè½®ç¡®è®¤ â†’ ä¿å­˜åˆ°Java")
    print("             â†“                              â†“")
    print("   æ¶ˆæ¯é˜Ÿåˆ—å›å¤ â†                    Javaå®šæ—¶ä»»åŠ¡")
    print("             â†“                              â†“")
    print("   ç¡¬ä»¶æ’­æ”¾å›å¤ â†                    åˆ°æ—¶MQTTæé†’")

def main():
    """ä¸»æ¼”ç¤ºå‡½æ•°"""
    print("ğŸ¯ æ™ºèƒ½æ—¶é—´ç¡®è®¤ç³»ç»Ÿå®Œæ•´åŠŸèƒ½å±•ç¤º")
    print("ğŸ”¸ è§£å†³ç”¨æˆ·æ¨¡ç³Šæ—¶é—´è¡¨è¾¾çš„é—®é¢˜")
    print("ğŸ”¸ é€šè¿‡å¤šè½®å¯¹è¯ç¡®è®¤å…·ä½“æ—¶é—´")
    print("ğŸ”¸ è‡ªåŠ¨ä¿å­˜ç­–ç•¥åˆ°Javaåç«¯")
    print()
    
    sections = [
        ("å¯¹è¯åœºæ™¯æ¼”ç¤º", demo_conversation_scenarios),
        ("APIæ¥å£è¯´æ˜", show_api_interface),
        ("æŠ€æœ¯ç‰¹æ€§å±•ç¤º", show_technical_features),
        ("é›†æˆæŒ‡å—è¯´æ˜", show_integration_guide)
    ]
    
    for i, (title, func) in enumerate(sections):
        if i > 0:
            input(f"\næŒ‰å›è½¦æŸ¥çœ‹ {title}...")
            print()
        func()
    
    print("\nğŸ‰ åŠŸèƒ½å±•ç¤ºå®Œæˆï¼")
    print("\nğŸ“‹ æ ¸å¿ƒä»·å€¼:")
    print("   âœ… ç”¨æˆ·ä½“éªŒï¼šè‡ªç„¶è¯­è¨€äº¤äº’ï¼Œæ™ºèƒ½ç†è§£æ„å›¾")
    print("   âœ… ç³»ç»Ÿå¯é ï¼šå¤šè½®ç¡®è®¤ç¡®ä¿æ—¶é—´å‡†ç¡®æ€§")  
    print("   âœ… é›†æˆå®Œå–„ï¼šä¸ç°æœ‰æ¶ˆæ¯é˜Ÿåˆ—å’ŒJavaåç«¯æ— ç¼é›†æˆ")
    print("   âœ… åŠŸèƒ½å®Œæ•´ï¼šæ”¯æŒè®¾ç½®ã€æŸ¥è¯¢ã€å–æ¶ˆç­‰å®Œæ•´æµç¨‹")
    print("\nğŸš€ ç°åœ¨ç”¨æˆ·å¯ä»¥è¯´ï¼š")
    print('   "ä¸‹å‘¨æé†’æˆ‘ç»™å¥³å„¿ä¹°ç”Ÿæ—¥ç¤¼ç‰©" â†’ ç³»ç»Ÿä¼šæ™ºèƒ½ç¡®è®¤å…·ä½“æ—¶é—´ï¼')

if __name__ == "__main__":
    main()
