# ğŸš€ WebSocket + é¢„ç¼“å†²ä¼˜åŒ–é…ç½®
# è¿™ä¸ªé…ç½®æ–‡ä»¶è®©ä½ èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ä¸Šçµæ´»è°ƒæ•´ä¼˜åŒ–å‚æ•°

websocket_optimization:
  # ğŸ¯ æ ¸å¿ƒå¼€å…³
  enabled: true  # æ˜¯å¦å¯ç”¨ä¼˜åŒ– (è®¾ä¸ºfalseå›åˆ°åŸå§‹è¡Œä¸º)
  
  # ğŸ“Š æ€§èƒ½ç›‘æ§
  performance_monitoring:
    enabled: true  # æ˜¯å¦å¯ç”¨æ€§èƒ½ç›‘æ§
    log_level: "info"  # æ—¥å¿—çº§åˆ«: debug, info, warning, error
    detailed_stats: true  # æ˜¯å¦è®°å½•è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯
    max_history: 100  # ä¿ç•™çš„å†å²è®°å½•æ•°é‡
  
  # âš¡ é¢„ç¼“å†²ç­–ç•¥
  prebuffer:
    # åŠ¨æ€é¢„ç¼“å†²å¸§æ•° (æ ¹æ®éŸ³é¢‘é•¿åº¦è‡ªåŠ¨è°ƒæ•´)
    short_audio_frames: 5    # çŸ­éŸ³é¢‘(<1ç§’): æœ€å¤šç¼“å†²5å¸§
    medium_audio_frames: 4   # ä¸­ç­‰éŸ³é¢‘(1-3ç§’): ç¼“å†²4å¸§
    long_audio_frames: 3     # é•¿éŸ³é¢‘(>3ç§’): ç¼“å†²3å¸§
    
    # é¢„ç¼“å†²é˜ˆå€¼ (å¸§æ•°)
    short_audio_threshold: 10   # â‰¤10å¸§ä¸ºçŸ­éŸ³é¢‘
    medium_audio_threshold: 30  # â‰¤30å¸§ä¸ºä¸­ç­‰éŸ³é¢‘
    
    # é¢„ç¼“å†²å‘é€ç­–ç•¥
    burst_send: true  # æ˜¯å¦çªå‘å‘é€é¢„ç¼“å†²å¸§ (æ— å»¶è¿Ÿ)
    
  # ğŸ›ï¸ æµæ§åˆ¶ä¼˜åŒ–
  flow_control:
    # å¸§é—´éš”ä¼˜åŒ– (æ¯«ç§’)
    standard_interval: 60      # æ ‡å‡†Opuså¸§é—´éš”
    optimized_interval: 55     # ä¼˜åŒ–åé—´éš” (ç•¥å¿«5ms)
    
    # æœ€å¤§å»¶è¿Ÿé™åˆ¶ (æ¯«ç§’)
    max_delay_per_frame: 55    # å•å¸§æœ€å¤§å»¶è¿Ÿ
    
    # ç½‘ç»œè‡ªé€‚åº”
    adaptive_timing: true      # æ˜¯å¦æ ¹æ®ç½‘ç»œçŠ¶å†µè‡ªé€‚åº”è°ƒæ•´
    
  # ğŸ“ˆ æ€§èƒ½ç›®æ ‡
  performance_targets:
    # ä¼˜åŒ–æ¯”ä¾‹ç›®æ ‡ (ä¼ è¾“æ—¶é—´/æ’­æ”¾æ—¶é—´)
    excellent_ratio: 0.3   # <0.3ä¸ºä¼˜ç§€
    good_ratio: 0.6        # <0.6ä¸ºè‰¯å¥½  
    acceptable_ratio: 1.0  # <1.0ä¸ºå¯æ¥å—
    
    # æœ€å°å¸§ç‡ç›®æ ‡ (å¸§/ç§’)
    min_frame_rate: 15     # æœ€ä½15å¸§/ç§’
    target_frame_rate: 20  # ç›®æ ‡20å¸§/ç§’
    
  # ğŸ”§ æ•…éšœæ’é™¤
  troubleshooting:
    # é”™è¯¯é‡è¯•
    enable_retry: true
    max_retries: 3
    retry_delay_ms: 100
    
    # é™çº§ç­–ç•¥
    fallback_to_standard: true  # å‡ºé”™æ—¶æ˜¯å¦é™çº§åˆ°æ ‡å‡†æ¨¡å¼
    fallback_threshold: 3       # è¿ç»­å¤±è´¥å¤šå°‘æ¬¡åé™çº§

# ğŸ“Š ç›‘æ§å’Œç»Ÿè®¡é…ç½®
monitoring:
  # è‡ªåŠ¨æŠ¥å‘Š
  auto_report:
    enabled: true
    interval_minutes: 30  # æ¯30åˆ†é’Ÿè‡ªåŠ¨è¾“å‡ºæ€§èƒ½æŠ¥å‘Š
    include_device_stats: true
    
  # æ€§èƒ½è­¦å‘Š
  alerts:
    slow_transmission: true      # ä¼ è¾“è¿‡æ…¢æ—¶è­¦å‘Š
    high_failure_rate: true      # é«˜å¤±è´¥ç‡æ—¶è­¦å‘Š
    poor_optimization: true      # ä¼˜åŒ–æ•ˆæœå·®æ—¶è­¦å‘Š
    
    # è­¦å‘Šé˜ˆå€¼
    slow_threshold_ratio: 1.5    # ä¼˜åŒ–æ¯”ä¾‹>1.5æ—¶è­¦å‘Š
    failure_rate_threshold: 0.1  # å¤±è´¥ç‡>10%æ—¶è­¦å‘Š

# ğŸ§ª æµ‹è¯•å’Œè°ƒè¯•
testing:
  # æµ‹è¯•æ¨¡å¼
  test_mode: false  # ç”Ÿäº§ç¯å¢ƒè®¾ä¸ºfalse
  
  # æ¨¡æ‹Ÿæµ‹è¯•
  simulate_network_delay: false
  simulated_delay_ms: 50
  
  # è°ƒè¯•è¾“å‡º
  debug_frame_sending: false    # æ˜¯å¦è°ƒè¯•æ¯å¸§å‘é€
  debug_timing: false          # æ˜¯å¦è°ƒè¯•æ—¶åºè®¡ç®—
  debug_performance: true      # æ˜¯å¦è°ƒè¯•æ€§èƒ½æŒ‡æ ‡

# ğŸ“ ä½¿ç”¨è¯´æ˜
# 1. ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®:
#    - enabled: true
#    - performance_monitoring.enabled: true  
#    - test_mode: false
#    - debug_*: false (é™¤äº†debug_performanceå¯ä»¥ä¿æŒtrue)
#
# 2. å¦‚æœé‡åˆ°é—®é¢˜:
#    - è®¾ç½® fallback_to_standard: true
#    - æ£€æŸ¥ monitoring.alerts çš„è­¦å‘Šä¿¡æ¯
#    - ä¸´æ—¶è®¾ç½® enabled: false å›åˆ°åŸå§‹æ¨¡å¼
#
# 3. æ€§èƒ½è°ƒä¼˜:
#    - è°ƒæ•´ prebuffer.* å‚æ•°æ¥ä¼˜åŒ–é¢„ç¼“å†²ç­–ç•¥
#    - è°ƒæ•´ flow_control.optimized_interval æ¥ä¼˜åŒ–ä¼ è¾“é€Ÿåº¦
#    - è§‚å¯Ÿæ—¥å¿—ä¸­çš„ä¼˜åŒ–æ¯”ä¾‹ï¼Œç›®æ ‡ < 0.6
